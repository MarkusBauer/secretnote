<div *ngIf="state == 'loading'">
    <div class="spinner-border spinner-border-sm text-secondary" role="status">
        <span class="sr-only" i18n="@@loading">Loading...</span>
    </div>&nbsp;
    loading ...
</div>
<div *ngIf="state == 'missing'" i18n>This note has expired (or the link is invalid).</div>
<div *ngIf="state == 'already_read'" i18n>This note has already been read.</div>
<div *ngIf="state == 'error'">
    Error.
</div>
<div *ngIf="state == 'ready'">
    <p i18n>Note <code>{{ident}}</code> has not been read - yet.</p>

    <br/>

    <form>
        <div class="form-group">
            <label for="url" i18n>It can be retrieved with the <span class="text-primary">secret link</span> below - but only once</label>
            <input type="text" id="url" class="form-control form-control-sm" readonly [value]="url" (click)="$event.target.select()">
        </div>
    </form>

    <br/>

    <form>
        <div class="form-group">
            <label for="adminUrl" i18n>You can check if the note was read using this <span class="text-danger">admin link</span>:</label>
            <input type="text" id="adminUrl" class="form-control form-control-sm" readonly [value]="adminUrl" (click)="$event.target.select()">
        </div>
    </form>

    <br/>

    <p *ngIf="!noteStatus.notify" class="text-muted" i18n>Telegram read notifications have not been configured.</p>
    <p *ngIf="noteStatus.notify && noteStatus.notify_to_valid" class="text-muted" i18n>Read notifications will be delivered to Telegram user <em>{{noteStatus.notify_to}}</em>.</p>
    <p *ngIf="noteStatus.notify && !noteStatus.notify_to_valid"><strong class="text-danger" i18n>Warning: </strong> <ng-container i18n>Read notifications configured for Telegram user <em>{{noteStatus.notify_to}}</em>, but user has not started the <a href="TODO">SecretNote Bot</a>.</ng-container></p>
    <form (submit)="addTelegramReadNotification(telegramNotification)">
        <div class="form-group">
            <label for="notifyTo" i18n>Enter your Telegram username or chat id to receive read notifications:</label>
            <div class="input-group input-group-sm">
                <input type="text" name="notifyTo" id="notifyTo" class="form-control" [(ngModel)]="telegramNotification">
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">Request Notification</button>
                </div>
            </div>
        </div>
    </form>
</div>
